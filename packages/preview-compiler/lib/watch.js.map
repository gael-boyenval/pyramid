{"version":3,"sources":["../src/watch.ts"],"names":["watch","opts","config","basePath","distPath","chokidar","srcPath","on","filePath","parsedPath","params","port","host","root","wait","logLevel","liveServer","start"],"mappings":";;;;;;;AAAA;;AACA;;AAEA;;AACA;;;;AAIA,IAAMA,KAAK,GAAG,SAARA,KAAQ,CAACC,IAAD,EAAwB;AACpC,MAAMC,MAAM,GAAGD,IAAf;AAEA,yCAAkBC,MAAM,CAACC,QAAzB,cAAqCD,MAAM,CAACE,QAA5C;;AAGAC,oBACGL,KADH,WACYE,MAAM,CAACC,QADnB,cAC+BD,MAAM,CAACI,OADtC,+BAEGC,EAFH,CAEM,QAFN,EAEgB,UAACC,QAAD,EAAc;AAC1B,QAAMC,UAAU,GAAG,wBAAUP,MAAV,EAAkBM,QAAlB,CAAnB;AACA,iCAAaC,UAAb,EAAyBD,QAAzB;AACD,GALH;;AAOA,MAAME,MAAM,GAAG;AACbC,IAAAA,IAAI,EAAE,IADO;AAEbC,IAAAA,IAAI,EAAE,SAFO;AAGbC,IAAAA,IAAI,YAAKX,MAAM,CAACC,QAAZ,cAAwBD,MAAM,CAACE,QAA/B,CAHS;AAIbU,IAAAA,IAAI,EAAE,GAJO;AAKbC,IAAAA,QAAQ,EAAE;AALG,GAAf;;AAQAC,sBAAWC,KAAX,CAAiBP,MAAjB;AACD,CAtBD;;eAwBeV,K","sourcesContent":["import liveServer from 'live-server';\nimport chokidar from 'chokidar';\n\nimport buildPreview from './processPreview';\nimport { createFullPath, parsePath } from './fsUtils';\n\nimport { Config } from './initialize';\n\nconst watch = (opts: Config): void => {\n  const config = opts;\n  // we add the required directory in public folder\n  createFullPath(`${config.basePath}/${config.distPath}`);\n\n  // watch for changes within files\n  chokidar\n    .watch(`${config.basePath}/${config.srcPath}/**/previews/*.preview.*`)\n    .on('change', (filePath) => {\n      const parsedPath = parsePath(config, filePath);\n      buildPreview(parsedPath, filePath);\n    });\n\n  const params = {\n    port: 8181, // Set the server port. Defaults to 8080.\n    host: '0.0.0.0', // Set the address to bind to. Defaults to 0.0.0.0 or process.env.IP.\n    root: `${config.basePath}/${config.distPath}`, // Set root directory that's being served. Defaults to cwd.\n    wait: 100, // Waits for all changes, before reloading. Defaults to 0 sec.\n    logLevel: 2, // 0 = errors only, 1 = some, 2 = lots\n  };\n\n  liveServer.start(params);\n};\n\nexport default watch;\n"],"file":"watch.js"}