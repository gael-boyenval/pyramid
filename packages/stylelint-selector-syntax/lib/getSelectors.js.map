{"version":3,"sources":["../src/getSelectors.ts"],"names":["selector","rule","result","selectorDef","resolvedSelector","forEach","sel","each","selectorNode","currentSelector","walk","s","push","value","type","process","e","warn"],"mappings":";;;;;;;AACA;;AACA;;;;AAIA,IAAMA,QAAQ,GAAG,CAACC,IAAD,EAAaC,MAAb,KAA6C;AAC5D,MAAMF,QAAQ,GAAGC,IAAI,CAACD,QAAtB;AACA,MAAMG,WAAwB,GAAG,EAAjC;AACA,MAAMC,gBAAkC,GAAG,2CACzCJ,QADyC,EAEzCC,IAFyC,CAA3C;AAKAG,EAAAA,gBAAgB,CAACC,OAAjB,CAA0BC,GAAD,IAAS;AAChC,QAAI;AACF,0CAAeA,GAAD,IAAmC;AAC/CA,QAAAA,GAAG,CAACC,IAAJ,CAAUC,YAAD,IAA0C;AACjD,cAAMC,eAAyB,GAAG,EAAlC;AAEAD,UAAAA,YAAY,CAACE,IAAb,CAAmBC,CAAD,IAAO;AACvBF,YAAAA,eAAe,CAACG,IAAhB,CAAqB;AACnBC,cAAAA,KAAK,EAAEF,CAAC,CAACE,KADU;AAEnBC,cAAAA,IAAI,EAAEH,CAAC,CAACG;AAFW,aAArB;AAID,WALD;AAOAX,UAAAA,WAAW,CAACS,IAAZ,CAAiBH,eAAjB;AACD,SAXD;AAYD,OAbD,EAaGM,OAbH,CAaWT,GAbX;AAcD,KAfD,CAeE,OAAOU,CAAP,EAAU;AACVd,MAAAA,MAAM,CAACe,IAAP,CAAY,uBAAZ,EAAqC,EAArC;AACD;AACF,GAnBD;AAqBA,SAAOd,WAAP;AACD,CA9BD;;eAgCeH,Q","sourcesContent":["// const stylelint = require(\"stylelint\");\nimport resolveNestedSelector from 'postcss-resolve-nested-selector';\nimport parseSelector from 'postcss-selector-parser';\nimport { SelectorDef, Selector, ResolvedSelector } from './selectors';\nimport { Rule, Result } from 'postcss';\n\nconst selector = (rule: Rule, result: Result): SelectorDef => {\n  const selector = rule.selector;\n  const selectorDef: SelectorDef = [];\n  const resolvedSelector: ResolvedSelector = resolveNestedSelector(\n    selector,\n    rule,\n  );\n\n  resolvedSelector.forEach((sel) => {\n    try {\n      parseSelector((sel: parseSelector.Root): void => {\n        sel.each((selectorNode: parseSelector.Selector) => {\n          const currentSelector: Selector = [];\n\n          selectorNode.walk((s) => {\n            currentSelector.push({\n              value: s.value,\n              type: s.type,\n            });\n          });\n\n          selectorDef.push(currentSelector);\n        });\n      }).process(sel);\n    } catch (e) {\n      result.warn('Cannot parse selector', {});\n    }\n  });\n\n  return selectorDef;\n};\n\nexport default selector;\n"],"file":"getSelectors.js"}